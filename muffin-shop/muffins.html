<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Muffins ‚Äî Sean‚Äôs Muffins</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    /* lightweight price styling */
    .price{font-weight:700;font-size:1.1rem;margin:6px 0 10px}
    .price .per{font-weight:500;color:#6a6f76;font-size:.95rem;margin-left:4px}

    /* Coming-soon badge + hide actions on disabled cards */
    .badge-soon{background:#fff0d6;color:#7a3b00}
    .card.is-disabled .buy{display:none}

    /* Ensure mobile menu can open if site CSS hasn‚Äôt set it */
    @media (max-width: 900px){
      .nav{display:none;}
      .nav.open{display:block;}
    }

    /* Mobile cart polish (kept minimal so it won‚Äôt fight your main stylesheet) */
    @media (max-width: 640px){
      #cart-drawer{ width:100vw; max-width:none; box-shadow: 0 -10px 30px rgba(0,0,0,.12); }
      .cart-header{ position:sticky; top:0; z-index:2; background:#fff; padding:14px 16px; border-bottom:1px solid #eee; }
      .cart-header h2{ margin:0; font-size:18px; }
      .cart-items{ padding:0 16px; }
      .cart-item{ display:flex; flex-direction:column; gap:8px; padding:12px 0; border-bottom:1px solid #eee; }
      .ci-name{ font-size:16px; line-height:1.3; font-weight:600; word-break:break-word; }
      .ci-qty{ display:flex; align-items:center; gap:8px; flex-wrap:nowrap; }
      .ci-qty .qty{ width:44px; height:44px; border-radius:10px; font-size:20px; line-height:1; }
      .ci-qty .qty-input{ width:64px; height:44px; text-align:center; font-size:16px; border-radius:10px; border:1px solid #ddd; }
      .ci-qty .remove{ margin-left:auto; width:44px; height:44px; border-radius:10px; }
      .cart-footer{ position:sticky; bottom:0; background:#fff; padding:12px 16px 16px; border-top:1px solid #eee; }
      .cart-delivery .row{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
      .cart-delivery input[type="date"], .cart-delivery select, .cart-delivery textarea{ width:100%; min-height:44px; border-radius:10px; }
      .cart-actions{ display:flex; gap:10px; margin-top:12px; }
      .cart-actions .btn, .cart-actions .btn-primary{ flex:1; min-height:44px; }
      .product .buy .btn{ width:100%; }
    }
  </style>
</head>
<body>
  <span id="a11y-live" class="visually-hidden" aria-live="polite"></span>
  <div id="toast" class="toast-container" aria-live="polite"></div>

  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">
        <img class="brand-logo" src="images/logo.png" alt="Sean‚Äôs Muffins logo" />
        <span>Sean‚Äôs Muffins</span>
      </a>
      <button class="nav-toggle" aria-expanded="false" aria-controls="primary-nav" aria-label="Toggle menu">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
      </button>
      <nav id="primary-nav" class="nav">
        <a href="index.html">Home</a>
        <a class="active" href="muffins.html">Muffins</a>
        <a href="new-flavors.html">New Flavors</a>
        <a href="merch.html">Merch (coming soon)</a>
        <a href="about.html">About</a>
      </nav>
      <button id="cart-button" class="cart-button" aria-label="Open cart" title="Cart">üß∫ <span class="cart-count" id="cart-count">0</span></button>
    </div>
    <div class="service-bar">
      <div>üöó Delivering to <strong>Wadsworth (44281)</strong> ‚Ä¢ ‚è∞ Order by <strong>8:30 PM</strong> for next-day delivery</div>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <h1>Subscriptions</h1>
      <p class="product-desc" style="margin:6px 0 18px;color:#6a6f76">
        Weekly deliveries. Cancel anytime. Delivery currently available in <strong>Wadsworth (44281)</strong> only.
      </p>

      <!-- Subscriptions: temporarily disabled -->
      <div class="card is-disabled" style="margin:10px 0 24px">
        <div class="product-info">
          <div class="product-top">
            <h3 style="margin:0">Weekly Subscriptions</h3>
            <span class="badge badge-soon">Coming soon</span>
          </div>
          <p class="product-desc" style="margin:8px 0 0">
            Weekly boxes are almost here. For now, grab any one-time box below üëá
          </p>
        </div>
      </div>

      <hr style="margin:34px 0;border:0;border-top:1px solid #ece8e2" />

      <h1>Muffins</h1>
      <p class="product-desc" style="margin:6px 0 18px;color:#6a6f76">One-time boxes. Mix &amp; match by adding to your cart.</p>

      <div class="grid-products">
        <!-- Blueberry -->
        <article class="product card" id="blueberry">
          <div class="thumb-wrap"><img loading="lazy" src="images/blueberry.jpg" alt="Blueberry Muffin" class="thumb-img"></div>
          <div class="product-info">
            <h3>Blueberry Muffin Box (4)</h3>
            <div class="price">$14.99</div>
            <p class="product-desc">Our jumbo muffin packed with juicy blueberries with a sweet muffin top.</p>
            <div class="buy buy-row">
              <button type="button" class="btn btn-primary"
                data-buy-now
                data-price="price_1S5qu9EhhuIMCnYGqrajXu46"
                data-name="Blueberry Muffin Box (4)"
                data-qty="1">Buy Now</button>
              <button type="button" class="btn btn-ghost"
                data-add
                data-price="price_1S5qu9EhhuIMCnYGqrajXu46"
                data-name="Blueberry Muffin Box (4)">Add to Cart</button>
            </div>
          </div>
        </article>

        <!-- Vanilla -->
        <article class="product card" id="vanilla">
          <div class="thumb-wrap"><img loading="lazy" src="images/vanilla.jpg" alt="Vanilla Muffin" class="thumb-img"></div>
          <div class="product-info">
            <h3>Vanilla Muffin Box (4)</h3>
            <div class="price">$14.99</div>
            <p class="product-desc">Classic vanilla with a delicate, golden top.</p>
            <div class="buy buy-row">
              <button type="button" class="btn btn-primary"
                data-buy-now
                data-price="price_1S5qqxEhhuIMCnYGUx30W267"
                data-name="Vanilla Muffin Box (4)"
                data-qty="1">Buy Now</button>
              <button type="button" class="btn btn-ghost"
                data-add
                data-price="price_1S5qqxEhhuIMCnYGUx30W267"
                data-name="Vanilla Muffin Box (4)">Add to Cart</button>
            </div>
          </div>
        </article>

        <!-- Chocolate Chip -->
        <article class="product card" id="chocolate-chip">
          <div class="thumb-wrap"><img loading="lazy" src="images/chocolate.jpg" alt="Chocolate Chip Muffin" class="thumb-img"></div>
          <div class="product-info">
            <h3>Chocolate Chip Muffin Box (4)</h3>
            <div class="price">$14.99</div>
            <p class="product-desc">Loaded with chocolate chips for maximum joy.</p>
            <div class="buy buy-row">
              <button type="button" class="btn btn-primary"
                data-buy-now
                data-price="price_1S5qnGEhhuIMCnYGs5ZCfLvh"
                data-name="Chocolate Chip Muffin Box (4)"
                data-qty="1">Buy Now</button>
              <button type="button" class="btn btn-ghost"
                data-add
                data-price="price_1S5qnGEhhuIMCnYGs5ZCfLvh"
                data-name="Chocolate Chip Muffin Box (4)">Add to Cart</button>
            </div>
          </div>
        </article>

        <!-- Banana Nut -->
        <article class="product card" id="banana-nut">
          <div class="thumb-wrap"><img loading="lazy" src="images/banana.jpg" alt="Banana Nut Muffin" class="thumb-img"></div>
          <div class="product-info">
            <h3>Banana Nut Muffin Box (4)</h3>
            <div class="price">$14.99</div>
            <p class="product-desc">Ripe bananas with crunchy walnuts for balance.</p>
            <div class="buy buy-row">
              <button type="button" class="btn btn-primary"
                data-buy-now
                data-price="price_1S5dJCEhhuIMCnYGxZ0pfmx1"
                data-name="Banana Nut Muffin Box (4)"
                data-qty="1">Buy Now</button>
              <button type="button" class="btn btn-ghost"
                data-add
                data-price="price_1S5dJCEhhuIMCnYGxZ0pfmx1"
                data-name="Banana Nut Muffin Box (4)">Add to Cart</button>
            </div>
          </div>
        </article>

        <!-- Pumpkin -->
        <article class="product card" id="pumpkin">
          <div class="thumb-wrap"><img loading="lazy" src="images/pumpkin.jpg" alt="Pumpkin Muffin" class="thumb-img"></div>
          <div class="product-info">
            <h3>Pumpkin Muffin Box (4)</h3>
            <div class="price">$14.99</div>
            <p class="product-desc">Fall flavors packed into our seasonal jumbo muffin.</p>
            <div class="buy buy-row">
              <button type="button" class="btn btn-primary"
                data-buy-now
                data-price="price_1S5r3TEhhuIMCnYGTCSxaDrJ"
                data-name="Pumpkin Muffin Box (4)"
                data-qty="1">Buy Now</button>
              <button type="button" class="btn btn-ghost"
                data-add
                data-price="price_1S5r3TEhhuIMCnYGTCSxaDrJ"
                data-name="Pumpkin Muffin Box (4)">Add to Cart</button>
            </div>
          </div>
        </article>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      ¬© <span id="y"></span> Sean‚Äôs Muffins ¬∑
      <a href="privacy.html">Privacy</a> ¬∑
      <a href="cookies.html">Cookies</a>
    </div>
  </footer>

  <!-- Cart Drawer -->
  <aside id="cart-drawer" class="cart-drawer" aria-hidden="true" aria-label="Shopping cart">
    <div class="cart-header"><h2>Your Cart</h2><button id="cart-close" class="cart-close" aria-label="Close cart">‚úï</button></div>
    <div id="cart-items" class="cart-items"></div>
    <div class="cart-footer">
      <div class="cart-total-row"><span>Items:</span><strong id="cart-item-count">0</strong></div>

      <!-- Delivery details (with notes) -->
      <div class="cart-delivery">
        <h3>Delivery Details</h3>
        <div class="row">
          <div>
            <label for="delivery-date">Date</label>
            <input type="date" id="delivery-date" required>
          </div>
          <div>
            <label for="delivery-time">Preferred time</label>
            <select id="delivery-time" required>
              <option value="">Select a window‚Ä¶</option>
              <option>6:00‚Äì7:00 AM</option>
              <option>7:00‚Äì8:00 AM</option>
              <option>8:00‚Äì9:00 AM</option>
            </select>
          </div>
        </div>

        <label for="order-notes" style="display:block;margin-top:10px;">Delivery / allergy notes (optional)</label>
        <textarea id="order-notes" rows="3" placeholder="Gate code, leave on porch, nut allergy, etc." style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px;"></textarea>
      </div>

      <div class="cart-actions">
        <button id="cart-clear" class="btn btn-ghost">Clear</button>
        <button id="cart-checkout" class="btn btn-primary">Checkout</button>
      </div>
      <p class="cart-cutoff">Orders after 8:30 PM are delivered the day after tomorrow.</p>
      <p class="cart-note">Checkout is handled securely by Stripe.</p>
    </div>
  </aside>
  <div id="cart-backdrop" class="cart-backdrop" aria-hidden="true"></div>

  <!-- Scripts (Stripe first, then config, then utils, then app scripts) -->
  <script src="https://js.stripe.com/v3"></script>
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  
  <script src="js/availability.js"></script>
  <script src="js/shop.js"></script>
</body>
</html>
